{
  "tests": [
    {
      "name": "LLM API Health Check",
      "type": "api",
      "config": {
        "request": {
          "method": "GET",
          "url": "{{APP_URL}}/health",
          "headers": {},
          "timeout": 10
        },
        "assertions": [
          {
            "type": "statusCode",
            "operator": "is",
            "target": 200
          },
          {
            "type": "body",
            "operator": "validatesJSONPath",
            "target": "$.status",
            "property": "equals",
            "expectedValue": "healthy"
          }
        ]
      },
      "message": "LLM API health check failed",
      "tags": ["llm", "health", "api", "synthetic"],
      "locations": ["aws:us-east-1"],
      "options": {
        "tick_every": 60,
        "min_failure_duration": 0,
        "min_location_failed": 1,
        "retry": {
          "count": 2,
          "interval": 1000
        }
      }
    },
    {
      "name": "LLM QA Endpoint Test",
      "type": "api",
      "config": {
        "request": {
          "method": "POST",
          "url": "{{APP_URL}}/qa",
          "headers": {
            "Content-Type": "application/json"
          },
          "body": "{\"question\": \"What is Datadog?\", \"document\": \"Datadog is an observability platform.\"}",
          "timeout": 30
        },
        "assertions": [
          {
            "type": "statusCode",
            "operator": "is",
            "target": 200
          },
          {
            "type": "responseTime",
            "operator": "lessThan",
            "target": 5000
          },
          {
            "type": "body",
            "operator": "validatesJSONPath",
            "target": "$.answer",
            "property": "isNotEmpty"
          }
        ]
      },
      "message": "LLM QA endpoint test failed",
      "tags": ["llm", "qa", "api", "synthetic"],
      "locations": ["aws:us-east-1"],
      "options": {
        "tick_every": 300,
        "min_failure_duration": 0,
        "min_location_failed": 1
      }
    },
    {
      "name": "LLM Insights Endpoint Test",
      "type": "api",
      "config": {
        "request": {
          "method": "POST",
          "url": "{{APP_URL}}/insights",
          "headers": {
            "Content-Type": "application/json"
          },
          "body": "{\"avg_latency_ms\": 1000.0, \"error_rate\": 0.01, \"avg_cost_per_request\": 0.005, \"avg_quality_score\": 0.8, \"latency_trend\": \"stable\", \"cost_trend\": \"stable\"}",
          "timeout": 10
        },
        "assertions": [
          {
            "type": "statusCode",
            "operator": "is",
            "target": 200
          },
          {
            "type": "body",
            "operator": "validatesJSONPath",
            "target": "$.health_summary.overall_health_score",
            "property": "greaterThan",
            "expectedValue": 0
          }
        ]
      },
      "message": "LLM Insights endpoint test failed",
      "tags": ["llm", "insights", "api", "synthetic"],
      "locations": ["aws:us-east-1"],
      "options": {
        "tick_every": 600,
        "min_failure_duration": 0,
        "min_location_failed": 1
      }
    },
    {
      "name": "LLM API Latency Test",
      "type": "api",
      "config": {
        "request": {
          "method": "GET",
          "url": "{{APP_URL}}/health",
          "headers": {},
          "timeout": 10
        },
        "assertions": [
          {
            "type": "statusCode",
            "operator": "is",
            "target": 200
          },
          {
            "type": "responseTime",
            "operator": "lessThan",
            "target": 1000
          }
        ]
      },
      "message": "LLM API latency exceeded threshold",
      "tags": ["llm", "latency", "synthetic", "slo"],
      "locations": ["aws:us-east-1", "aws:us-west-2"],
      "options": {
        "tick_every": 60,
        "min_failure_duration": 300,
        "min_location_failed": 1
      }
    }
  ],
  "note": "Replace {{APP_URL}} with your deployed application URL. Import these tests via Datadog UI: Synthetics → New Test → Import JSON"
}

